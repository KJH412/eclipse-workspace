<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<style type="text/css">
	img {
		display: block;
		width: 100px;
		margin: 20px;
	}
	#here{
		border: none;
	}
	div, div h1, span{
		border: 2px solid #f00;
		padding: 10px;
	}
	.orange{
		border: 5px dotted orange;
	}
	.blue{
		border: 5px dotted paleturquoise;
	}
</style>
<script type="text/javascript">
	window.onload = init;

	function init() {
		hear = document.querySelector("#here");
		var btn1 = document.querySelector("button:nth-of-type(1)");
		var btn2 = document.querySelector("button:nth-of-type(2)");
		btn3 = document.querySelector("button:nth-of-type(3)");
		var btn4 = document.querySelector("button:nth-of-type(4)");
		var btn5 = document.querySelector("button:nth-of-type(5)");
		var btn6 = document.querySelector("button:nth-of-type(6)");
		var btn7 = document.querySelector("button:nth-of-type(7)");
		var img1 = document.querySelector("#redcup")
		var frm = document.querySelector("#myForm");
		var div = document.querySelector("#mydiv");
		var h1 = document.querySelector("#myh1");
		var div2 = document.querySelector("#mydiv2");
		var h2 = document.querySelector("#myh2");
		
		btn6.addEventListener("click", f_button6);
		btn7.addEventListener("click", f_button7);
		
		function f_button6(){
			//img1.style.border = "5px dotted lime";
			img1.className = "orange"; //css만들어서 붙이기
		}
		function f_button7(){
			//img1.style.border = "5px dotted black";
			img1.className = "blue";
		}
		
		
		//표준 방식 addEventListener("이벤트이름", 핸들러 , 버블링);
		div2.addEventListener("click", function(){ alert("div이다.");}, false); //버블링 false가 default이다.(false)
		h2.addEventListener("click", 
			function(event){ 
				alert("div안에 있는 h1이다.");
				event = event||window.event;
				evet.stopPropagation(); //전달막기
			}, false); //버블링 default이다.(false)
		
		frm.onsubmit = f_frmcheck;
		
		//고전적 방식
		btn1.onclick = f_button1;
		btn2.onclick = f_button2;
		btn3.onclick = f_button3;
		img1.onclick = f_button3; //이미지를 클릭해도 버튼과 같은 로직 수행 가능.
		btn4.onclick = f_button4;
		btn5.onclick = f_button5;
		div.onclick = function(){alert("div이다.");};
		h1.onclick = function(event){ 
			alert("div안에 있는 h1이다."); 
			//이벤트 전달 막기(버블링 막기)
			event.stopPropagation;
		};
		
		function f_frmcheck(){
			var userid = document.querySelector("#userid").value;
			if(userid != 'admin') return false; //default event취소(서버 전송 취소)
		}
		
		function f_button1() {
			here.innerHTML = "<h1>innerHTML연습</h1>";
		}
		function f_button2() {
			here.innerText = "<h1>innerText연습</h1>";
		}
		function f_button3(event) {
			var output;
			//output = document.getElementById("redcup").getAttribute("src");
			//output = document.getElementsByClassName("redcup")[0].getAttribute("src");
			//select : * , #id ,.class , 태그
			output = document.querySelector("#aa + img").getAttribute("src");

			var img = "../17/images/cup-1.png"
			var su;
			if (output == img) {
				//document.querySelector("#aa + img").setAttribute("src", "../17/images/cup-2.png");
				su = "2";
			} else {
				//document.querySelector("#aa + img").setAttribute("src", "../17/images/cup-1.png");
				su = "1";
			}
			document.querySelector("#aa + img").setAttribute("src",
					`../17/images/cup-${su}.png`);

			here.innerHTML = output;
			here.innerHTML += "<hr>이벤트 타입: " + event.type + ":x=" + event.pageX
					+ "y=" + event.pageY;
			here.innerHTML += "<hr>클릭한 객체: " + this;
			console.log(event);
		}
		function f_button4() {
			alert(this.innerText);
			btn4.onclick = null; //이벤트 지우기(한 번만 수행)
		}
		function f_button5() {
			btn3.onclick(); //이벤트 강제?호출
			//f_button3(); //함수 호출
		}
	}
</script>
</head>
<body>
	<div id="mydiv2">
		<h1 id="myh2">DOM에 대하여(표준 이벤트 모델).....</h1>
	</div>

	<div id="mydiv">
		<h1 id="myh1">DOM에 대하여.....</h1>
	</div>
	
	<button class="btn btn-primary">innerHRML</button>
	<button class="btn btn-primary">innerText</button>
	<button id="aa" class="btn btn-primary">속성접근</button>
	<img id="redcup" calss="redcup" alt="빨간색 컵"
		src="../17/images/cup-1.png">
	<button class="btn btn-primary">이벤트 지우기</button>
	<button class="btn btn-primary">이벤트 호출</button>
	<button class="btn btn-primary">스타일 변경1</button>
	<button class="btn btn-primary">스타일 변경2</button>
	<hr>
	<h1>default이벤트에 대하여</h1>
	<form id="myForm" action="jstest.jsp" onsubmit="return call()">
		아이디: <input id="userid" placeholder="admin일때 서버전송"> <input type="submit" value="서버에 전송(submit)">
		<button>서버에 전송2(submit와 같음)</button>
		<input type="button" value="form내의 button" onclick="alert('button');">
	</form>
	<hr>
	<div onclick="alert('바깥div');"> 
		<div onclick="alert('안쪽div'); event.stopPropagation();">
			<h1 onclick="alert('h1'); event.stopPropagation();">
				이벤트의 
				<span onclick="alert('span'); event.stopPropagation();">버블링</span>
				과 캡처링 연습하기
			</h1>
			<!--  event.stopPropagation(); =>이벤트 전달 막기: 내 이벤트만 수행  그 이후의 다른 이벤트는 x  -->
		</div>
	</div>
	<hr>
	<div id="here">여기</div>
</body>
</html>